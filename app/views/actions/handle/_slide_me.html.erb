<% content_for :javascript do %>
  <% state_code = action.state_code %>
  <% action_id = (action.id) ? action.id : action.temp_id %>
  $(document).ready(function(){
    $("#handle_head_<%= action_id %>").html("<%= state_code %>");//add the real state here
    $("#handle_foot_<%= action_id %>").html("<%= action.to_s.humanize %>");

    $("#handle_<%= action_id %>").slider({
      orientation: "<%= action.handle.orientation ? action.handle.orientation : 'vertical' %>",
      range: "min",
      value: <%= state_code %>,// todo get current value
      min: <%= action.range_min %> ,
      max: <%= action.range_max %>,
      slide: function(event, ui) {
        $("#handle_head_<%= action_id %>").html(ui.value);

      },
      change: function(event, ui){
        $("#handle_head_<%= action_id %>").html(ui.value);
      }
    });        
  });
<% end %>
