<script>
  <% state = (defined?(simulate) && simulate && {:code => 50, :state => 50}) || action.state %>
  <% state_code = state[:code] %>
  <% action_id = (action.id) ? action.id : action.temp_id %>

  $("#handle_head_<%= action_id %>").html("<%= state_code %>");//add the real state here
  $("#handle_foot_<%= action_id %>").html("<%= action.to_s.humanize %>");

  $("#handle_<%= action_id %>").slider({
        orientation: "<%= action.slider_orientation %>",
        range: 'min',
        value: <%= state_code %>,// todo get current value
        min: <%= action.range_min %> ,
        max: <%= action.range_max %>,
        slide: function(event, ui) {
          $("#handle_head_<%= action_id %>").html(ui.value);

        },
        change: function(event, ui){
          $("#handle_head_<%= action_id %>").html(ui.value);
  }});
</script>
